### Введение

#### Что такое сетевые протоколы

**Сетевой протокол** — это набор правил и соглашений, которые определяют, как устройства обмениваются данными в сети.

**Зачем они нужны?**
- Обеспечивают единый стандарт обмена данными между разными устройствами (компьютерами, серверами, смартфонами).
- Позволяют разным программам и ОС понимать друг друга.
- Контролируют передачу данных, исправление ошибок, безопасность.

Примеры протоколов:
- **HTTP/HTTPS** — для веб-страниц
- **FTP** — для передачи файлов
- **TCP/IP** — основа интернета
- **DNS** — преобразует домены в IP-адреса.

#### Модель OSI и TCP/IP: на каких уровнях работают HTTP и HTTPS

##### Модель OSI (7 уровней)

HTTP и HTTPS работают на **прикладном уровне (7-й)**, но опираются на протоколы нижних уровней:

|Уровень OSI|Пример протоколов|Роль для HTTP/HTTPS|
|---|---|---|
|**Прикладной (7)**|HTTP, HTTPS, FTP, DNS|Непосредственно передача веб-страниц|
|**Представления (6)**|SSL/TLS (для HTTPS)|Шифрование данных|
|**Сеансовый (5)**|Управление соединением|Поддержка сессий|
|**Транспортный (4)**|TCP, UDP|Надёжная доставка (TCP)|
|**Сетевой (3)**|IP, ICMP|Маршрутизация пакетов|
|**Канальный (2)**|Ethernet, Wi-Fi|Передача между устройствами|
|**Физический (1)**|Кабели, радиосигналы|Передача битов|

##### Модель TCP/IP (4 уровня)

Более практичная модель, используемая в интернете:

|Уровень TCP/IP|Соответствие OSI|Протоколы|
|---|---|---|
|**Прикладной**|5-7|HTTP, HTTPS, FTP|
|**Транспортный**|4|TCP, UDP|
|**Сетевой**|3|IP, ICMP|
|**Канальный**|1-2|Ethernet, Wi-Fi|

**Где работают HTTP и HTTPS?**
- **HTTP** — прикладной уровень (передаёт данные в открытом виде).
- **HTTPS** — тоже прикладной, но **добавляет шифрование (SSL/TLS) на уровне представления/сеансового**.

---

### Изучение протокола HTTP

#### Что такое HTTP?

**HTTP (HyperText Transfer Protocol)** — это протокол прикладного уровня для передачи гипертекстовых документов (например, HTML). Он работает по схеме **«клиент-сервер»**:

- Клиент (браузер) отправляет **HTTP-запрос** на сервер.
- Сервер обрабатывает запрос и возвращает **HTTP-ответ**.

**Основные характеристики HTTP:**

- Работает поверх **TCP/IP** (по умолчанию порт **80**).
- **Текстовый** (в HTTP/1.x) или **бинарный** (в HTTP/2, HTTP/3) формат сообщений.
- **Stateless (без состояния)** — сервер не хранит данные о предыдущих запросах (для этого используются **cookies и сессии**).

#### Версии HTTP

| Версия       | Год  | Особенности                                                                    |
| ------------ | ---- | ------------------------------------------------------------------------------ |
| **HTTP/0.9** | 1991 | Только GET, нет заголовков.                                                    |
| **HTTP/1.0** | 1996 | Добавлены методы, заголовки, коды статусов.                                    |
| **HTTP/1.1** | 1997 | **Keep-Alive** (долгие соединения), **Host** (виртуальные хосты), кэширование. |
| **HTTP/2**   | 2015 | **Бинарный протокол**, мультиплексирование, Server Push.                       |
| **HTTP/3**   | 2022 | Работает поверх **QUIC (UDP)**, уменьшает задержки.                            |

#### Структура HTTP-запроса и ответа

TODO (запрос, ответ, коды ответов, заголовки, методы)

---

### Недостатки HTTP и необходимость HTTPS

#### Проблемы безопасности в HTTP

Передача данных в открытом виде (plain text):
- Все данные (логины, пароли, номера карт, личные сообщения) передаются без шифрования.
- Злоумышленник, перехвативший трафик (например, через публичный Wi-Fi), может легко прочитать содержимое.

Уязвимости к атакам:
- MITM-атака (Man-in-the-Middle):
	- Злоумышленник встаёт между клиентом и сервером, перехватывая или изменяя данные.
	- Пример: подмена сайта банка на фишинговый.

- Сниффинг (Sniffing):
	- Использование программ-анализаторов трафика (Wireshark, tcpdump) для кражи данных.
	
- Подделка данных (Data Tampering):
	- HTTP не гарантирует целостность данных.
	- Хакер может изменить содержимое страницы (например, добавить вредоносный скрипт).

- Отсутствие аутентификации:
	- HTTP не проверяет подлинность сервера.
	- Риск подключения к фальшивому сайту.

#### Почему HTTPS стал стандартом?

Шифрование данных (SSL/TLS):
- Все данные передаются в зашифрованном виде (используются алгоритмы AES, RSA, ECC).
- Даже если трафик перехватят, расшифровать его без ключа невозможно.

Защита от MITM-атак:
- Сертификат SSL/TLS подтверждает подлинность сервера.
- Браузер проверяет сертификат и предупреждает, если он недействителен.

Целостность данных:
- HTTPS гарантирует, что данные не были изменены при передаче.

Доверие пользователей:
- Браузеры помечают HTTP-сайты как "Небезопасные".
- Для SEO и репутации сайта HTTPS обязателен.

Требования современных стандартов:
- Google и Mozilla продвигают HTTPS как обязательный стандарт.
- Некоторые функции (геолокация, PWA, HTTP/2) работают только через HTTPS.

---

### Изучение протокола HTTPS

 **HTTPS (HTTP Secure)** – это HTTP + шифрование (SSL/TLS), обеспечивающее конфиденциальность и целостность данных.

#### Как работает HTTPS

##### Шифрование в HTTPS

HTTPS использует два типа шифрования: **асимметричное** и **асимметричное**.

Сначала клиент и сервер используют **асимметричное шифрование** для обмена симметричным ключом. Затем всё дальнейшее общение идёт через симметричное шифрование (оно быстрее).

##### SSL/TLS-протоколы

HTTPS использует **TLS (Transport Layer Security)** или его устаревшую версию **SSL** для защиты данных.

**TLS Handshake** – процесс установки безопасного соединения:
1. **Client Hello** – клиент отправляет список поддерживаемых шифров и версий TLS.
2. **Server Hello** – сервер выбирает шифр и отправляет свой SSL-сертификат.
3. **Проверка сертификата** – браузер проверяет, доверен ли сертификат.
4. **Обмен ключами** – клиент генерирует предмастер-ключ, шифрует его публичным ключом сервера.
5. **Симметричное шифрование** – сервер расшифровывает ключ, и далее обмен идёт через симметричное шифрование.


